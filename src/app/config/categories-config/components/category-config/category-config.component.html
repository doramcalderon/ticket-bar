<ion-header>
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-button slot="icon-only" (click)="close()">
                <ion-icon name="close"></ion-icon>
            </ion-button>
        </ion-buttons>
        <ion-title translate>{{ !!category ? category.name : 'CATEGORY_CONFIG.DEFAULT_TITLE' }}</ion-title>
        <ion-buttons slot="end">
            <ion-button slot="icon-only" [disabled]="categoriesForm.untouched || !categoriesForm.valid" (click)="saveAndDismiss()">
                <ion-icon name="checkmark"></ion-icon>
            </ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>
<ion-content>
    <form [formGroup]="categoriesForm" novalidate>
        <ion-item>
            <ion-label position="floating" translate>CATEGORY_CONFIG.NAME</ion-label>
            <ion-input #categoryName formControlName="name" placeholder="{{ 'CATEGORY_CONFIG.NAME_PLACEHOLDER' | translate }}"></ion-input>
        </ion-item>
        <ion-item (click)="selectImage()">
            <div>
                <ion-label translate>CATEGORY_CONFIG.ICON</ion-label>
                <ion-label class="icon-placeholder" color="medium" *ngIf="!icon" translate>CATEGORY_CONFIG.SELECT_ICON</ion-label>
                <ion-icon [name]="icon" size="large" *ngIf="!!icon" slot="start"></ion-icon>
            </div>
        </ion-item>
        <ion-item>
            <ion-label position="floating" translate>CATEGORY_CONFIG.COLOR</ion-label>
            <ion-input
                class="input-color-picker"
                [(colorPicker)]="color"
                [style.background]="color"
                [style.border-color]="color"
                [cpOKButton]="true"
                [cpCancelButton]="true"
                (colorPickerSelect)="changeColor($event)"
            ></ion-input>
        </ion-item>
        <ion-list>
            <ion-list-header>
                <ion-toolbar translate>
                    CATEGORY_CONFIG.TICKETS.TITLE

                    <ion-buttons slot="end">
                        <ion-button slot="icon-only" (click)="showSaveBeforeAlert()">
                            <ion-icon name="add"></ion-icon>
                        </ion-button>
                    </ion-buttons>
                </ion-toolbar>
            </ion-list-header>
            <ion-item *ngFor="let ticket of tickets">
                <div class="ticket-item" (click)="openTicketConfig(ticket)">
                    {{ ticket.name }}
                </div>
                <ion-buttons slot="end">
                    <ion-button slot="icon-only" (click)="showRemoveTicketConfirm(ticket)">
                        <ion-icon name="trash" class="trash-icon"></ion-icon>
                    </ion-button>
                </ion-buttons>
            </ion-item>
        </ion-list>
    </form>
</ion-content>
