{"version":3,"sources":["./src/app/cart/components/cart-button/cart-button.component.html","./src/app/cart/components/cart/cart.component.html","./src/app/cart/components/ticket/ticket.component.html","./src/app/cart/cart.module.ts","./src/app/cart/components/cart-button/cart-button.component.css","./src/app/cart/components/cart-button/cart-button.component.ts","./src/app/cart/components/cart/cart.component.scss","./src/app/cart/components/cart/cart.component.ts","./src/app/cart/components/ticket/ticket.component.scss","./src/app/cart/components/ticket/ticket.component.ts","./src/app/cart/store/cart.actions.ts","./src/app/cart/store/cart.reducer.ts","./src/app/cart/store/cart.selectors.ts","./src/app/cart/store/cart.service.ts","./src/app/common/services/categories.service.ts"],"names":[],"mappings":"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","file":"default~category-detail-category-detail-module~home-home-module-es2015.js","sourcesContent":["export default \"<ion-chip (click)=\\\"openCart()\\\">\\n    <ion-icon name=\\\"cart\\\"></ion-icon>\\n    <ion-badge>{{ total$ | async }}</ion-badge>\\n</ion-chip>\\n\"","export default \"<ion-header>\\r\\n    <ion-toolbar>\\r\\n        <ion-buttons slot=\\\"start\\\">\\r\\n            <ion-button slot=\\\"icon-only\\\" (click)=\\\"dismiss()\\\"><ion-icon name=\\\"close\\\"></ion-icon></ion-button>\\r\\n        </ion-buttons>\\r\\n        <ion-title>Resumen</ion-title>\\r\\n        <ion-buttons slot=\\\"end\\\">\\r\\n            <ion-button slot=\\\"icon-only\\\"><ion-icon name=\\\"print\\\"></ion-icon></ion-button>\\r\\n        </ion-buttons>\\r\\n    </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content>\\r\\n    <ion-list *ngFor=\\\"let categorySumm of cartStateSummary | keyvalue\\\">\\r\\n        <ion-list-header>\\r\\n            <div class=\\\"category-title\\\">\\r\\n                <ion-icon [name]=\\\"categorySumm.value.category.icon\\\"></ion-icon>\\r\\n                <ion-label>{{ categorySumm.key }}</ion-label>\\r\\n            </div>\\r\\n        </ion-list-header>\\r\\n        <ion-item *ngFor=\\\"let typeTickets of categorySumm.value.tickets | keyvalue\\\">\\r\\n            <ion-grid>\\r\\n                <ion-row>\\r\\n                    <ion-col>\\r\\n                        <tb-ticket [ticket]=\\\"typeTickets.value.ticket\\\"></tb-ticket>\\r\\n                    </ion-col>\\r\\n                    <ion-col>\\r\\n                        <ion-label> X {{ typeTickets.value.units }}</ion-label>\\r\\n                    </ion-col>\\r\\n                    <ion-col> = {{ typeTickets.value.total }} € </ion-col>\\r\\n                </ion-row>\\r\\n            </ion-grid>\\r\\n        </ion-item>\\r\\n    </ion-list>\\r\\n    <!-- <ion-list>\\r\\n        <ion-item *ngFor=\\\"let item of ticketsByType | keyvalue\\\">\\r\\n            <ion-avatar slot=\\\"start\\\">\\r\\n                <ion-icon [name]=\\\"item.value.ticket.category.icon\\\" size=\\\"large\\\"></ion-icon>\\r\\n            </ion-avatar>\\r\\n            <ion-label>{{ item.key }}</ion-label>\\r\\n            <div class=\\\"item-note\\\" slot=\\\"end\\\">{{ item.value.units }}</div>\\r\\n            <div class=\\\"item-note\\\" slot=\\\"end\\\">{{ item.value.total }} €</div>\\r\\n        </ion-item>\\r\\n    </ion-list> -->\\r\\n</ion-content>\\r\\n\"","export default \"<ion-card>\\r\\n    <ion-card-header>\\r\\n        <ion-label>Kiosko El Korner</ion-label>\\r\\n    </ion-card-header>\\r\\n    <ion-card-content *ngIf=\\\"!!ticket\\\">\\r\\n        <div class=\\\"ticket-content\\\">\\r\\n            <ion-icon [name]=\\\"ticket.category.icon\\\" size=\\\"large\\\"></ion-icon>\\r\\n            <ion-label>{{ ticket.type.name | uppercase }}</ion-label>\\r\\n        </div>\\r\\n        <div class=\\\"ticket-price\\\">\\r\\n            <ion-label slot=\\\"end\\\">{{ ticket.type.price }} €</ion-label>\\r\\n        </div>\\r\\n    </ion-card-content>\\r\\n</ion-card>\\r\\n\"","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { StoreModule } from '@ngrx/store';\r\n\r\nimport * as fromCart from '../cart/store/cart.reducer';\r\nimport { CartComponent } from './components/cart/cart.component';\r\nimport { CartButtonComponent } from './components/cart-button/cart-button.component';\nimport { TicketComponent } from './components/ticket/ticket.component';\r\n\r\n@NgModule({\r\n    imports: [CommonModule, FormsModule, IonicModule, StoreModule.forFeature(fromCart.cartFeatureKey, fromCart.reducer)],\r\n    declarations: [CartComponent, CartButtonComponent, TicketComponent],\r\n    entryComponents: [CartComponent],\r\n    exports: [CartButtonComponent],\r\n})\r\nexport class CartModule {}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NhcnQvY29tcG9uZW50cy9jYXJ0LWJ1dHRvbi9jYXJ0LWJ1dHRvbi5jb21wb25lbnQuY3NzIn0= */\"","import { Component, OnInit } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\n\nimport { Observable } from 'rxjs';\n\nimport { CartService } from '../../store/cart.service';\nimport { CartComponent } from '../cart/cart.component';\n\n@Component({\n    selector: 'tb-cart-button',\n    templateUrl: './cart-button.component.html',\n    styleUrls: ['./cart-button.component.css'],\n})\nexport class CartButtonComponent implements OnInit {\n    public total$: Observable<number>;\n\n    constructor(private modalController: ModalController, private cartService: CartService) {}\n\n    ngOnInit() {\n        this.total$ = this.cartService.getTotal();\n    }\n\n    async openCart() {\n        const modal = await this.modalController.create({\n            component: CartComponent,\n        });\n        return await modal.present();\n    }\n}\n","export default \".category-title ion-label {\\n  font-size: 1.4rem;\\n}\\n.category-title ion-icon {\\n  font-size: 1.2rem;\\n  padding-right: 1rem;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY2FydC9jb21wb25lbnRzL2NhcnQvRTpcXFByb3llY3Rvc1xcTXkgUHJvamVjdHNcXHRpY2tldC1iYXIvc3JjXFxhcHBcXGNhcnRcXGNvbXBvbmVudHNcXGNhcnRcXGNhcnQuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL2NhcnQvY29tcG9uZW50cy9jYXJ0L2NhcnQuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0k7RUFDSSxpQkFBQTtBQ0FSO0FERUk7RUFDSSxpQkFBQTtFQUNBLG1CQUFBO0FDQVIiLCJmaWxlIjoic3JjL2FwcC9jYXJ0L2NvbXBvbmVudHMvY2FydC9jYXJ0LmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNhdGVnb3J5LXRpdGxlIHtcclxuICAgIGlvbi1sYWJlbCB7XHJcbiAgICAgICAgZm9udC1zaXplOiAxLjRyZW07XHJcbiAgICB9XHJcbiAgICBpb24taWNvbiB7XHJcbiAgICAgICAgZm9udC1zaXplOiAxLjJyZW07XHJcbiAgICAgICAgcGFkZGluZy1yaWdodDogMXJlbTtcclxuICAgIH1cclxufVxyXG4iLCIuY2F0ZWdvcnktdGl0bGUgaW9uLWxhYmVsIHtcbiAgZm9udC1zaXplOiAxLjRyZW07XG59XG4uY2F0ZWdvcnktdGl0bGUgaW9uLWljb24ge1xuICBmb250LXNpemU6IDEuMnJlbTtcbiAgcGFkZGluZy1yaWdodDogMXJlbTtcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\r\nimport { ModalController } from '@ionic/angular';\r\n\r\nimport { CategorySummary } from '../../store/cart.reducer';\r\nimport { CartService } from '../../store/cart.service';\r\n\r\n@Component({\r\n    selector: 'tb-cart',\r\n    templateUrl: './cart.component.html',\r\n    styleUrls: ['./cart.component.scss'],\r\n})\r\nexport class CartComponent implements OnInit {\r\n    public cartStateSummary: { [category: string]: CategorySummary } = {};\r\n\r\n    constructor(private modalCtrl: ModalController, private cartService: CartService) {}\r\n\r\n    ngOnInit() {\r\n        this.cartService.getCart().subscribe({\r\n            next: cartState => {\r\n                this.cartStateSummary = cartState.summary;\r\n            },\r\n        });\r\n    }\r\n\r\n    public dismiss() {\r\n        this.modalCtrl.dismiss();\r\n    }\r\n}\r\n","export default \"ion-card {\\n  width: 16rem;\\n}\\n\\n.ticket-icon {\\n  display: -webkit-box;\\n  display: flex;\\n  -webkit-box-align: center;\\n          align-items: center;\\n  -webkit-box-pack: center;\\n          justify-content: center;\\n}\\n\\n.ticket-content {\\n  display: -webkit-box;\\n  display: flex;\\n  -webkit-box-align: end;\\n          align-items: flex-end;\\n}\\n\\n.ticket-content ion-label {\\n  font-size: 1.4rem;\\n}\\n\\n.ticket-content ion-icon {\\n  padding-right: 1rem;\\n}\\n\\n.ticket-price {\\n  display: block;\\n  float: right;\\n}\\n\\n.ticket-price ion-label {\\n  font-size: x-large;\\n  font-weight: bold;\\n  padding-left: 1rem;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY2FydC9jb21wb25lbnRzL3RpY2tldC9FOlxcUHJveWVjdG9zXFxNeSBQcm9qZWN0c1xcdGlja2V0LWJhci9zcmNcXGFwcFxcY2FydFxcY29tcG9uZW50c1xcdGlja2V0XFx0aWNrZXQuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL2NhcnQvY29tcG9uZW50cy90aWNrZXQvdGlja2V0LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksWUFBQTtBQ0NKOztBRENBO0VBQ0ksb0JBQUE7RUFBQSxhQUFBO0VBQ0EseUJBQUE7VUFBQSxtQkFBQTtFQUNBLHdCQUFBO1VBQUEsdUJBQUE7QUNFSjs7QURBQTtFQUNJLG9CQUFBO0VBQUEsYUFBQTtFQUNBLHNCQUFBO1VBQUEscUJBQUE7QUNHSjs7QURESTtFQUNJLGlCQUFBO0FDR1I7O0FEREk7RUFDSSxtQkFBQTtBQ0dSOztBREFBO0VBQ0ksY0FBQTtFQUNBLFlBQUE7QUNHSjs7QURESTtFQUNJLGtCQUFBO0VBQ0EsaUJBQUE7RUFDQSxrQkFBQTtBQ0dSIiwiZmlsZSI6InNyYy9hcHAvY2FydC9jb21wb25lbnRzL3RpY2tldC90aWNrZXQuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24tY2FyZCB7XHJcbiAgICB3aWR0aDogMTZyZW07XHJcbn1cclxuLnRpY2tldC1pY29uIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbn1cclxuLnRpY2tldC1jb250ZW50IHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBhbGlnbi1pdGVtczogZmxleC1lbmQ7XHJcblxyXG4gICAgaW9uLWxhYmVsIHtcclxuICAgICAgICBmb250LXNpemU6IDEuNHJlbTtcclxuICAgIH1cclxuICAgIGlvbi1pY29uIHtcclxuICAgICAgICBwYWRkaW5nLXJpZ2h0OiAxcmVtO1xyXG4gICAgfVxyXG59XHJcbi50aWNrZXQtcHJpY2Uge1xyXG4gICAgZGlzcGxheTogYmxvY2s7XHJcbiAgICBmbG9hdDogcmlnaHQ7XHJcblxyXG4gICAgaW9uLWxhYmVsIHtcclxuICAgICAgICBmb250LXNpemU6IHgtbGFyZ2U7XHJcbiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgICAgICAgcGFkZGluZy1sZWZ0OiAxcmVtO1xyXG4gICAgfVxyXG59XHJcbiIsImlvbi1jYXJkIHtcbiAgd2lkdGg6IDE2cmVtO1xufVxuXG4udGlja2V0LWljb24ge1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbn1cblxuLnRpY2tldC1jb250ZW50IHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGZsZXgtZW5kO1xufVxuLnRpY2tldC1jb250ZW50IGlvbi1sYWJlbCB7XG4gIGZvbnQtc2l6ZTogMS40cmVtO1xufVxuLnRpY2tldC1jb250ZW50IGlvbi1pY29uIHtcbiAgcGFkZGluZy1yaWdodDogMXJlbTtcbn1cblxuLnRpY2tldC1wcmljZSB7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBmbG9hdDogcmlnaHQ7XG59XG4udGlja2V0LXByaWNlIGlvbi1sYWJlbCB7XG4gIGZvbnQtc2l6ZTogeC1sYXJnZTtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIHBhZGRpbmctbGVmdDogMXJlbTtcbn0iXX0= */\"","import { Component, OnInit, Input } from '@angular/core';\n\nimport { Ticket } from '../../store/cart.model';\n\n@Component({\n    selector: 'tb-ticket',\n    templateUrl: './ticket.component.html',\n    styleUrls: ['./ticket.component.scss'],\n})\nexport class TicketComponent implements OnInit {\n    @Input() ticket: Ticket;\n\n    constructor() {}\n\n    ngOnInit() {}\n}\n","import { createAction, props } from '@ngrx/store';\nimport { Ticket } from './cart.model';\n\nexport const loadCart = createAction('[Cart] Load Cart');\n\nexport const loadCartSuccess = createAction('[Cart] Load Cart Success', props<{ data: any }>());\n\nexport const loadCartFailure = createAction('[Cart] Load Cart Failure', props<{ error: any }>());\n\nexport const addTicket = createAction('[Cart] Add Ticket', props<{ ticket: Ticket }>());\n","import { Action, createReducer, on } from '@ngrx/store';\r\n\r\nimport { Category } from '../../common/model/category.model';\r\nimport * as CartActions from './cart.actions';\r\nimport { Ticket } from './cart.model';\r\n\r\nexport const cartFeatureKey = 'cart';\r\n\r\nexport interface TicketSummary {\r\n    [type: string]: { ticket: Ticket; units?: number; total?: number };\r\n}\r\nexport interface CategorySummary {\r\n    category?: Category;\r\n    tickets?: TicketSummary;\r\n}\r\n\r\nexport interface CartState {\r\n    summary?: { [category: string]: CategorySummary };\r\n    ticketsCount?: number;\r\n}\r\n\r\nexport const initialState: CartState = {\r\n    ticketsCount: 0,\r\n};\r\n\r\nconst cartReducer = createReducer(\r\n    initialState,\r\n\r\n    on(CartActions.loadCart, state => state),\r\n    on(CartActions.loadCartSuccess, (state, action) => state),\r\n    on(CartActions.loadCartFailure, (state, action) => state),\r\n    on(CartActions.addTicket, (state: CartState, action) => addTicketToState(state, action.ticket)),\r\n);\r\n\r\nconst addTicketToState = (state: CartState, ticket: Ticket): CartState => {\r\n    const category: Category = ticket.category;\r\n    const categorySumm: CategorySummary = !!state.summary && state.summary[category.name] ? state.summary[category.name] : {};\r\n    const ticketSumm: TicketSummary = !!state.summary && state.summary[category.name] ? state.summary[category.name].tickets : {};\r\n\r\n    return {\r\n        summary: {\r\n            ...state.summary,\r\n            [category.name]: {\r\n                ...categorySumm,\r\n                category,\r\n                tickets: createOrUpdateTicketSummary(ticket, ticketSumm),\r\n            },\r\n        },\r\n        ticketsCount: state.ticketsCount + 1,\r\n    };\r\n};\r\n\r\n/**\r\n * If the ticket type not already exists in the tickets summary, this is created.\r\n * Otherwise, the units and total are updated.\r\n */\r\nconst createOrUpdateTicketSummary = (ticket: Ticket, ticketsSumm: TicketSummary): TicketSummary => {\r\n    const ticketType: string = ticket.type.name;\r\n    const ticketTypeFound: { ticket: Ticket; units?: number; total?: number } = ticketsSumm[ticketType];\r\n\r\n    const units: number = !!ticketTypeFound ? ticketTypeFound.units + 1 : 1;\r\n    const total: number = ticket.type.price * units;\r\n    return {\r\n        ...ticketsSumm,\r\n        [ticket.type.name]: {\r\n            ticket,\r\n            units,\r\n            total,\r\n        },\r\n    };\r\n};\r\n\r\nexport function reducer(state: CartState | undefined, action: Action) {\r\n    return cartReducer(state, action);\r\n}\r\n","import { createFeatureSelector, createSelector } from '@ngrx/store';\r\nimport * as fromCart from './cart.reducer';\r\n\r\nexport const selectCartState = createFeatureSelector<fromCart.CartState>(fromCart.cartFeatureKey);\r\nexport const selectCartTotal = createSelector(selectCartState, (state: fromCart.CartState) => state.ticketsCount);\r\nexport const selectTicketsTypeCount = createSelector(selectCartState, (state: fromCart.CartState, ticketType: string) =>\r\n    !!state.summary\r\n        ? Object.keys(state.summary).reduce(\r\n              (acc: number, categoryName) => acc + countTicketsByType(ticketType, state.summary[categoryName].tickets),\r\n              0,\r\n          )\r\n        : 0,\r\n);\r\n\r\nconst countTicketsByType = (ticketType: string, ticketSummary: fromCart.TicketSummary): number => {\r\n    return !!ticketSummary\r\n        ? Object.keys(ticketSummary)\r\n              .filter(tt => tt === ticketType)\r\n              .reduce((count, tt) => ticketSummary[tt].units + count, 0)\r\n        : 0;\r\n};\r\n","import { Injectable } from '@angular/core';\r\nimport { Store } from '@ngrx/store';\r\n\r\nimport { Observable } from 'rxjs';\r\n\r\nimport { TicketType } from '../../common/model/category.model';\r\nimport * as CartActions from './cart.actions';\r\nimport { Cart, Ticket } from './cart.model';\r\nimport { CartState } from './cart.reducer';\r\nimport * as CartSelectors from './cart.selectors';\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class CartService {\r\n    constructor(private store: Store<Cart>) {}\r\n\r\n    public loadCart() {\r\n        this.store.dispatch(CartActions.loadCart());\r\n    }\r\n\r\n    public addTicket(ticket: Ticket) {\r\n        this.store.dispatch(CartActions.addTicket({ ticket }));\r\n    }\r\n\r\n    public getTotal(): Observable<number> {\r\n        return this.store.select(CartSelectors.selectCartTotal);\r\n    }\r\n\r\n    public getTicketsTypeCount(ticketType: TicketType): Observable<number> {\r\n        return this.store.select(CartSelectors.selectTicketsTypeCount, ticketType.name);\r\n    }\r\n\r\n    public getCart(): Observable<CartState> {\r\n        return this.store.select(CartSelectors.selectCartState);\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { TicketType, Category } from '../model/category.model';\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class CategoriesService {\r\n    private readonly foodTickets: TicketType[] = [\r\n        { name: 'Hamburguesa', price: 3.5 },\r\n        { name: 'Pinchito', price: 3.5 },\r\n        { name: 'Campero', price: 3.5 },\r\n        { name: 'Patatas', price: 2 },\r\n    ];\r\n    private readonly drinkTickets: TicketType[] = [\r\n        { name: 'Combinado', price: 4 },\r\n        { name: 'Refresco', price: 2.5 },\r\n        { name: 'Agua', price: 1 },\r\n    ];\r\n    private readonly categories: Category[] = [\r\n        { id: '1', name: 'Bebida', icon: 'beer', color: 'food', tickets: this.drinkTickets },\r\n        { id: '2', name: 'Comida', icon: 'pizza', color: 'drink', tickets: this.foodTickets },\r\n        { id: '3', name: 'Otros', icon: 'wine', color: 'warning' },\r\n    ];\r\n\r\n    constructor() {}\r\n\r\n    public getAllCategories(): Category[] {\r\n        return this.categories;\r\n    }\r\n\r\n    public getCategory(id: string): Category {\r\n        return this.categories.find(c => c.id === id);\r\n    }\r\n}\r\n"],"sourceRoot":"webpack:///"}