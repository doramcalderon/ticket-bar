(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"1wh9":function(n,l,t){"use strict";var e=t("8Y7J"),u=t("oBZk"),i=t("ZZ/e"),c=t("SVse");class o{constructor(){}ngOnInit(){}}var r=e.zb({encapsulation:0,styles:[["ion-card[_ngcontent-%COMP%]{width:16rem;margin:0}.ticket-icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.ticket-content[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:end;align-items:flex-end}.ticket-content[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:1.4rem}.ticket-content[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{padding-right:1rem}.ticket-price[_ngcontent-%COMP%]{display:block;float:right}.ticket-price[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:x-large;font-weight:700;padding-left:1rem}"]],data:{}});function a(n){return e.Vb(0,[(n()(),e.Bb(0,0,null,null,12,"ion-card-content",[],null,null,null,u.F,u.g)),e.Ab(1,49152,null,0,i.l,[e.j,e.p,e.F],null,null),(n()(),e.Bb(2,0,null,0,6,"div",[["class","ticket-content"]],null,null,null,null,null)),(n()(),e.Bb(3,0,null,null,1,"ion-icon",[["size","large"]],null,null,null,u.N,u.n)),e.Ab(4,49152,null,0,i.A,[e.j,e.p,e.F],{name:[0,"name"],size:[1,"size"]},null),(n()(),e.Bb(5,0,null,null,3,"ion-label",[],null,null,null,u.Q,u.q)),e.Ab(6,49152,null,0,i.L,[e.j,e.p,e.F],null,null),(n()(),e.Tb(7,0,["",""])),e.Pb(8,1),(n()(),e.Bb(9,0,null,0,3,"div",[["class","ticket-price"]],null,null,null,null,null)),(n()(),e.Bb(10,0,null,null,2,"ion-label",[["slot","end"]],null,null,null,u.Q,u.q)),e.Ab(11,49152,null,0,i.L,[e.j,e.p,e.F],null,null),(n()(),e.Tb(12,0,[""," \u20ac"]))],(function(n,l){n(l,4,0,l.component.ticket.category.icon,"large")}),(function(n,l){var t=l.component,u=e.Ub(l,7,0,n(l,8,0,e.Mb(l.parent,0),t.ticket.type.name));n(l,7,0,u),n(l,12,0,t.ticket.type.price)}))}function s(n){return e.Vb(0,[e.Ob(0,c.p,[]),(n()(),e.Bb(1,0,null,null,8,"ion-card",[],null,null,null,u.H,u.f)),e.Ab(2,49152,null,0,i.k,[e.j,e.p,e.F],null,null),(n()(),e.Bb(3,0,null,0,4,"ion-card-header",[],null,null,null,u.G,u.h)),e.Ab(4,49152,null,0,i.m,[e.j,e.p,e.F],null,null),(n()(),e.Bb(5,0,null,0,2,"ion-label",[],null,null,null,u.Q,u.q)),e.Ab(6,49152,null,0,i.L,[e.j,e.p,e.F],null,null),(n()(),e.Tb(-1,0,["Kiosko El Korner"])),(n()(),e.qb(16777216,null,0,1,null,a)),e.Ab(9,16384,null,0,c.k,[e.W,e.S],{ngIf:[0,"ngIf"]},null)],(function(n,l){n(l,9,0,!!l.component.ticket)}),null)}var b=t("s7LF"),m=t("cmPU"),p=t("PCgK");t.d(l,"a",(function(){return O}));var d=e.zb({encapsulation:0,styles:[['.category-title[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:1.4rem}.category-title[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2rem;padding-right:1rem}.input-units[_ngcontent-%COMP%]{--padding-top:0!important;--padding-bottom:0!important;text-align:right}.input-units[_ngcontent-%COMP%]::before{content:"X"}.trash-icon[_ngcontent-%COMP%]{color:grey}.empty-cart[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);font-size:large;color:grey}ion-col[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:end;justify-content:flex-end}ion-col[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{align-self:flex-end}']],data:{}});function f(n){return e.Vb(0,[(n()(),e.Bb(0,0,null,null,26,"ion-item",[],null,null,null,u.P,u.p)),e.Ab(1,49152,null,0,i.F,[e.j,e.p,e.F],null,null),(n()(),e.Bb(2,0,null,0,24,"ion-grid",[],null,null,null,u.L,u.l)),e.Ab(3,49152,null,0,i.y,[e.j,e.p,e.F],null,null),(n()(),e.Bb(4,0,null,0,22,"ion-row",[],null,null,null,u.W,u.w)),e.Ab(5,49152,null,0,i.hb,[e.j,e.p,e.F],null,null),(n()(),e.Bb(6,0,null,0,3,"ion-col",[["size","12"],["size-sm",""]],null,null,null,u.J,u.j)),e.Ab(7,49152,null,0,i.r,[e.j,e.p,e.F],{size:[0,"size"]},null),(n()(),e.Bb(8,0,null,0,1,"tb-ticket",[],null,null,null,s,r)),e.Ab(9,114688,null,0,o,[],{ticket:[0,"ticket"]},null),(n()(),e.Bb(10,0,null,0,5,"ion-col",[],null,null,null,u.J,u.j)),e.Ab(11,49152,null,0,i.r,[e.j,e.p,e.F],null,null),(n()(),e.Bb(12,0,null,0,3,"ion-input",[["class","input-units"],["min","1"],["type","number"]],null,[[null,"ionChange"],[null,"ionBlur"]],(function(n,l,t){var u=!0,i=n.component;return"ionBlur"===l&&(u=!1!==e.Mb(n,15)._handleBlurEvent(t.target)&&u),"ionChange"===l&&(u=!1!==e.Mb(n,15)._handleIonChange(t.target)&&u),"ionChange"===l&&(u=!1!==i.unitsChange(t,n.context.$implicit.value.ticket)&&u),u}),u.O,u.o)),e.Qb(5120,null,b.b,(function(n){return[n]}),[i.Gb]),e.Ab(14,49152,null,0,i.E,[e.j,e.p,e.F],{min:[0,"min"],type:[1,"type"],value:[2,"value"]},null),e.Ab(15,16384,null,0,i.Gb,[e.p],null,null),(n()(),e.Bb(16,0,null,0,4,"ion-col",[],null,null,null,u.J,u.j)),e.Ab(17,49152,null,0,i.r,[e.j,e.p,e.F],null,null),(n()(),e.Bb(18,0,null,0,2,"ion-label",[],null,null,null,u.Q,u.q)),e.Ab(19,49152,null,0,i.L,[e.j,e.p,e.F],null,null),(n()(),e.Tb(20,0,[" = "," \u20ac "])),(n()(),e.Bb(21,0,null,0,5,"ion-col",[],null,null,null,u.J,u.j)),e.Ab(22,49152,null,0,i.r,[e.j,e.p,e.F],null,null),(n()(),e.Bb(23,0,null,0,3,"ion-button",[["fill","clear"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.deleteTicket(n.context.$implicit.value.ticket)&&e),e}),u.D,u.d)),e.Ab(24,49152,null,0,i.i,[e.j,e.p,e.F],{fill:[0,"fill"]},null),(n()(),e.Bb(25,0,null,0,1,"ion-icon",[["class","trash-icon"],["name","trash"],["slot","icon-only"]],null,null,null,u.N,u.n)),e.Ab(26,49152,null,0,i.A,[e.j,e.p,e.F],{name:[0,"name"]},null)],(function(n,l){n(l,7,0,"12"),n(l,9,0,l.context.$implicit.value.ticket),n(l,14,0,"1","number",l.context.$implicit.value.units),n(l,24,0,"clear"),n(l,26,0,"trash")}),(function(n,l){n(l,20,0,l.context.$implicit.value.total)}))}function g(n){return e.Vb(0,[(n()(),e.Bb(0,0,null,null,12,"ion-list",[],null,null,null,u.S,u.r)),e.Ab(1,49152,null,0,i.M,[e.j,e.p,e.F],null,null),(n()(),e.Bb(2,0,null,0,7,"ion-list-header",[],null,null,null,u.R,u.s)),e.Ab(3,49152,null,0,i.N,[e.j,e.p,e.F],null,null),(n()(),e.Bb(4,0,null,0,5,"div",[["class","category-title"]],null,null,null,null,null)),(n()(),e.Bb(5,0,null,null,1,"ion-icon",[],null,null,null,u.N,u.n)),e.Ab(6,49152,null,0,i.A,[e.j,e.p,e.F],{name:[0,"name"]},null),(n()(),e.Bb(7,0,null,null,2,"ion-label",[],null,null,null,u.Q,u.q)),e.Ab(8,49152,null,0,i.L,[e.j,e.p,e.F],null,null),(n()(),e.Tb(9,0,["",""])),(n()(),e.qb(16777216,null,0,2,null,f)),e.Ab(11,278528,null,0,c.j,[e.W,e.S,e.x],{ngForOf:[0,"ngForOf"]},null),e.Ob(0,c.f,[e.y])],(function(n,l){n(l,6,0,l.context.$implicit.value.category.icon),n(l,11,0,e.Ub(l,11,0,e.Mb(l,12).transform(l.context.$implicit.value.tickets)))}),(function(n,l){n(l,9,0,l.context.$implicit.key)}))}function k(n){return e.Vb(0,[(n()(),e.Bb(0,0,null,null,3,"div",[],null,null,null,null,null)),(n()(),e.qb(16777216,null,null,2,null,g)),e.Ab(2,278528,null,0,c.j,[e.W,e.S,e.x],{ngForOf:[0,"ngForOf"]},null),e.Ob(0,c.f,[e.y])],(function(n,l){var t=l.component;n(l,2,0,e.Ub(l,2,0,e.Mb(l,3).transform(t.cartStateSummary)))}),null)}function y(n){return e.Vb(0,[(n()(),e.Bb(0,0,null,null,5,"div",[["class","empty-cart"]],null,null,null,null,null)),(n()(),e.Bb(1,0,null,null,1,"ion-icon",[["name","cart"],["size","large"]],null,null,null,u.N,u.n)),e.Ab(2,49152,null,0,i.A,[e.j,e.p,e.F],{name:[0,"name"],size:[1,"size"]},null),(n()(),e.Bb(3,0,null,null,2,"ion-label",[],null,null,null,u.Q,u.q)),e.Ab(4,49152,null,0,i.L,[e.j,e.p,e.F],null,null),(n()(),e.Tb(-1,0,["No hay tickets seleccionados"]))],(function(n,l){n(l,2,0,"cart","large")}),null)}function j(n){return e.Vb(0,[(n()(),e.Bb(0,0,null,null,18,"ion-header",[],null,null,null,u.M,u.m)),e.Ab(1,49152,null,0,i.z,[e.j,e.p,e.F],null,null),(n()(),e.Bb(2,0,null,0,16,"ion-toolbar",[],null,null,null,u.Z,u.z)),e.Ab(3,49152,null,0,i.Ab,[e.j,e.p,e.F],null,null),(n()(),e.Bb(4,0,null,0,5,"ion-buttons",[["slot","start"]],null,null,null,u.E,u.e)),e.Ab(5,49152,null,0,i.j,[e.j,e.p,e.F],null,null),(n()(),e.Bb(6,0,null,0,3,"ion-button",[["slot","icon-only"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.dismiss()&&e),e}),u.D,u.d)),e.Ab(7,49152,null,0,i.i,[e.j,e.p,e.F],null,null),(n()(),e.Bb(8,0,null,0,1,"ion-icon",[["name","close"]],null,null,null,u.N,u.n)),e.Ab(9,49152,null,0,i.A,[e.j,e.p,e.F],{name:[0,"name"]},null),(n()(),e.Bb(10,0,null,0,2,"ion-title",[],null,null,null,u.Y,u.y)),e.Ab(11,49152,null,0,i.yb,[e.j,e.p,e.F],null,null),(n()(),e.Tb(-1,0,["Resumen"])),(n()(),e.Bb(13,0,null,0,5,"ion-buttons",[["slot","end"]],null,null,null,u.E,u.e)),e.Ab(14,49152,null,0,i.j,[e.j,e.p,e.F],null,null),(n()(),e.Bb(15,0,null,0,3,"ion-button",[["slot","icon-only"]],null,null,null,u.D,u.d)),e.Ab(16,49152,null,0,i.i,[e.j,e.p,e.F],null,null),(n()(),e.Bb(17,0,null,0,1,"ion-icon",[["name","print"]],null,null,null,u.N,u.n)),e.Ab(18,49152,null,0,i.A,[e.j,e.p,e.F],{name:[0,"name"]},null),(n()(),e.Bb(19,0,null,null,5,"ion-content",[],null,null,null,u.K,u.k)),e.Ab(20,49152,null,0,i.s,[e.j,e.p,e.F],null,null),(n()(),e.qb(16777216,null,0,2,null,k)),e.Ab(22,16384,null,0,c.k,[e.W,e.S],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),e.Ob(131072,c.b,[e.j]),(n()(),e.qb(0,[["emptyCart",2]],0,0,null,y))],(function(n,l){var t=l.component;n(l,9,0,"close"),n(l,18,0,"print"),n(l,22,0,e.Ub(l,22,0,e.Mb(l,23).transform(t.cartTotal$))>0,e.Mb(l,24))}),null)}function C(n){return e.Vb(0,[(n()(),e.Bb(0,0,null,null,1,"tb-cart",[],null,null,null,j,d)),e.Ab(1,114688,null,0,m.a,[i.Eb,p.a],null,null)],(function(n,l){n(l,1,0)}),null)}var O=e.xb("tb-cart",m.a,C,{},{},[])},Djip:function(n,l,t){"use strict";t.d(l,"a",(function(){return i})),t.d(l,"b",(function(){return b}));var e=t("DQLy"),u=t("fC9B");const i="cart",c=Object(e.w)({ticketsCount:0},Object(e.z)(u.c,n=>n),Object(e.z)(u.e,(n,l)=>n),Object(e.z)(u.d,(n,l)=>n),Object(e.z)(u.a,(n,l)=>r(n,l.ticket,l.count)),Object(e.z)(u.b,(n,l)=>o(n,l.ticket))),o=(n,l)=>{const t=l.category.name,e=Object.assign({},n.summary[t]),u=Object.assign({},n.summary[t].tickets),i=n.ticketsCount-s(l.type.name,u);if(delete u[l.type.name],0===Object.keys(u).length){const l=Object.assign({},n.summary);return delete l[t],{summary:l,ticketsCount:i}}return{summary:Object.assign({},n.summary,{[t]:Object.assign({},e,{tickets:u})}),ticketsCount:i}},r=(n,l,t)=>{const e=l.category;return{summary:Object.assign({},n.summary,{[e.name]:Object.assign({},n.summary&&n.summary[e.name]?n.summary[e.name]:{},{category:e,tickets:a(l,n.summary&&n.summary[e.name]?n.summary[e.name].tickets:{},t)})}),ticketsCount:t||n.ticketsCount+1}},a=(n,l,t)=>{const e=l[n.type.name],u=t||(e?e.units+1:1);return Object.assign({},l,{[n.type.name]:{ticket:n,units:u,total:n.type.price*u}})},s=(n,l)=>l?Object.keys(l).filter(l=>l===n).reduce((n,t)=>l[t].units+n,0):0;function b(n,l){return c(n,l)}},PCgK:function(n,l,t){"use strict";var e=t("fC9B"),u=t("DQLy"),i=t("Djip");const c=Object(u.v)(i.a),o=Object(u.y)(c,n=>n.ticketsCount),r=Object(u.y)(c,(n,l)=>n.summary?Object.keys(n.summary).reduce((t,e)=>t+a(l,n.summary[e].tickets),0):0),a=(n,l)=>l?Object.keys(l).filter(l=>l===n).reduce((n,t)=>l[t].units+n,0):0;var s=t("8Y7J");t.d(l,"a",(function(){return b}));let b=(()=>{class n{constructor(n){this.store=n}loadCart(){this.store.dispatch(e.c())}addTicket(n,l){this.store.dispatch(e.a({ticket:n,count:l}))}removeTicket(n){this.store.dispatch(e.b({ticket:n}))}getTotal(){return this.store.select(o)}getTicketsTypeCount(n){return this.store.select(r,n.name)}getCart(){return this.store.select(c)}}return n.ngInjectableDef=s.Yb({factory:function(){return new n(s.Zb(u.n))},token:n,providedIn:"root"}),n})()},bCsl:function(n,l,t){"use strict";t.d(l,"a",(function(){return u}));var e=t("8Y7J");let u=(()=>{class n{constructor(){this.foodTickets=[{name:"Hamburguesa",price:3.5},{name:"Pinchito",price:3.5},{name:"Campero",price:3.5},{name:"Patatas",price:2}],this.drinkTickets=[{name:"Combinado",price:4},{name:"Refresco",price:2.5},{name:"Agua",price:1}],this.categories=[{id:"1",name:"Bebida",icon:"beer",color:"food",tickets:this.drinkTickets},{id:"2",name:"Comida",icon:"pizza",color:"drink",tickets:this.foodTickets},{id:"3",name:"Otros",icon:"wine",color:"warning"}]}getAllCategories(){return this.categories}getCategory(n){return this.categories.find(l=>l.id===n)}}return n.ngInjectableDef=e.Yb({factory:function(){return new n},token:n,providedIn:"root"}),n})()},cmPU:function(n,l,t){"use strict";t.d(l,"a",(function(){return e})),t("ZZ/e"),t("PCgK");class e{constructor(n,l){this.modalCtrl=n,this.cartService=l,this.cartStateSummary={}}ngOnInit(){this.cartService.getCart().subscribe({next:n=>{this.cartStateSummary=n.summary}}),this.cartTotal$=this.cartService.getTotal()}dismiss(){this.modalCtrl.dismiss()}unitsChange(n,l){this.cartService.addTicket(l,+n.detail.value)}deleteTicket(n){this.cartService.removeTicket(n)}}},fC9B:function(n,l,t){"use strict";t.d(l,"c",(function(){return u})),t.d(l,"e",(function(){return i})),t.d(l,"d",(function(){return c})),t.d(l,"a",(function(){return o})),t.d(l,"b",(function(){return r}));var e=t("DQLy");const u=Object(e.u)("[Cart] Load Cart"),i=Object(e.u)("[Cart] Load Cart Success",Object(e.A)()),c=Object(e.u)("[Cart] Load Cart Failure",Object(e.A)()),o=Object(e.u)("[Cart] Add Ticket",Object(e.A)()),r=Object(e.u)("[Cart] Delete Ticket",Object(e.A)())},fLsF:function(n,l,t){"use strict";var e=t("8Y7J"),u=t("oBZk"),i=t("ZZ/e"),c=t("SVse");t("yFDM"),t("PCgK"),t.d(l,"a",(function(){return o})),t.d(l,"b",(function(){return r}));var o=e.zb({encapsulation:0,styles:[[""]],data:{}});function r(n){return e.Vb(0,[(n()(),e.Bb(0,0,null,null,7,"ion-chip",[],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.openCart()&&e),e}),u.I,u.i)),e.Ab(1,49152,null,0,i.q,[e.j,e.p,e.F],null,null),(n()(),e.Bb(2,0,null,0,1,"ion-icon",[["name","cart"]],null,null,null,u.N,u.n)),e.Ab(3,49152,null,0,i.A,[e.j,e.p,e.F],{name:[0,"name"]},null),(n()(),e.Bb(4,0,null,0,3,"ion-badge",[],null,null,null,u.C,u.c)),e.Ab(5,49152,null,0,i.h,[e.j,e.p,e.F],null,null),(n()(),e.Tb(6,0,["",""])),e.Ob(131072,c.b,[e.j])],(function(n,l){n(l,3,0,"cart")}),(function(n,l){var t=l.component;n(l,6,0,e.Ub(l,6,0,e.Mb(l,7).transform(t.total$)))}))}},v35Q:function(n,l,t){"use strict";t.d(l,"a",(function(){return e}));class e{}},yFDM:function(n,l,t){"use strict";t.d(l,"a",(function(){return i}));var e=t("mrSG"),u=(t("ZZ/e"),t("PCgK"),t("cmPU"));class i{constructor(n,l){this.modalController=n,this.cartService=l}ngOnInit(){this.total$=this.cartService.getTotal()}openCart(){return e.b(this,void 0,void 0,(function*(){const n=yield this.modalController.create({component:u.a});return yield n.present()}))}}}}]);